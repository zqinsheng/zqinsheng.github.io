---
title: 微信小程序-开发框架组成
date: 2019-4-2 20:15:12
tags:
- 框架
categories:
- 微信小程序
---
## 小程序代码组成  
在我们新建好一个小程序项目后，开发工具帮我们把基本的结构目录搭建好了，我们不难发现，在每一个文件夹下面都有四个文件，每一个页面都对应着四个文件  
![](http://wx1.sinaimg.cn/mw690/007HSgDpgy1g1oo9naxkyj308307ia9y.jpg)  

这些文件就是小程序的组成元素,小程序由 配置代码JSON文件、模板代码 WXML 文件、样式代码 WXSS文件以及逻辑代码 JavaScript文件组成。每一个文件都发挥着各自的作用，下面来详细介绍每一个文件所扮演的角色。  

## 一、WXML 模板  
WXML 全称是 WeiXin Markup Language，是小程序框架设计的一套标签语言，结合小程序的各种组件渲染出页面的结构。**语法和HTML类似**，有过HTML开发经验应该可以很快上手，它也是通过标签来渲染视图的，基本语法如下:  
```
<!-- 在此处写注释 -->

<标签名 属性名1="属性值1" 属性名2="属性值2" ...> ...</标签名>
```

- 标签拥有一些共同属性  

属性名 | 类型 | 描述 | 备注
----|------|---- |------|
id | String  | 组件的唯一标识 |在整个页面唯一
class | String  | 组件的样式类|在对应的 WXSS 中定义的样式类
style	|String|	组件的内联样式	| 可以动态设置的内联样式
hidden|	Boolean	|组件是否显示	|所有组件默认显示
data-* |Any	|自定义属性	|组件上触发的事件时，会发送给事件处理函数
bind*/catch*|EventHandler|组件的事件|

<!-- more -->
- 标签自定义属性  


```
<view test-data-name="hello"> </view>
```
我们为view标签自定义了一个test-data-name的属性，它的值为hello  

- 注意事项  

​一个完整的 WXML语句由一段开始标签和一段结束标签组成，WXML 要求标签必须是严格闭合的，没有闭合将会导致编译错误。  
```
text 没有闭合，导致编译错误：
expect end-tag `text`., near `view`
    |   <view>
    |     <text>hello world
    |   </view>
    |    ^
    | </view>
```  



## 二、WXSS 样式
WXSS（WeiXin Style Sheets）是一套用于小程序的样式语言，用于描述WXML的组件样式，也就是视觉上的效果。WXSS与Web开发中的CSS类似。为了更适合小程序开发，WXSS对CSS做了一些补充以及修改。熟悉web开发的朋友对WXSS也应该很快就上手。  
- 项目公共样式  
![](http://wx3.sinaimg.cn/mw690/007HSgDpgy1g1qlbfsuawj30d7065q2z.jpg)  
在项目根目录下，可以看到一个app.wxss文件，这个文件为项目公共样式，在这个页面里面写的样式会被注入到小程序的每个页面，对其每一个页面都生效。  

- 其他样式  
![](http://wx3.sinaimg.cn/mw690/007HSgDpgy1g1qlbj7ud8j307s09l3yi.jpg)  
每个页面对应的样式文件，也可以被其它样式或公共样式引用  

## 三、JavaScript 脚本  
小程序的主要开发语言是 JavaScript ，开发者使用 JavaScript 来开发业务逻辑以及调用小程序的 API 来完成业务需求。  

## 四、JSON 配置文件  
JSON(JavaScript Object Notation, JS 对象简谱) 是一种轻量级的数据交换格式，它不是一种编程语言，它在小程序中扮演着静态配置的作用，简洁和清晰的层次结构使得 JSON 成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成，并有效地提升网络传输效率。  

 Json文件同样分为两种:**1.全局Json配置文件 2、单一页面Json配置文件**。全局Json配置文件在项目根目录下，单一页面的Json配置文件在每个页面文件夹下。  

 我们可以更改全局Json配置文件，改变界面的总体设置  
 ```
 {
  "pages":[
    "pages/index/index",
    "pages/logs/logs"
  ],
  "window":{
    "backgroundTextStyle":"light",
    "navigationBarBackgroundColor": "#fff",
    "navigationBarTitleText": "WeChat",
    "navigationBarTextStyle":"black"
  }
}
 ```
尝试更改项目启动的默认页面：  
```
项目中的所有页面都要在"pages"中注册
在pages数组中，放在第一个位置的页面会被默认加载
所以我们启动小程序默认是显示pages/index/index的页面
可以更改顺序，把"pages/logs/logs"放到"pages/index/index"前面，改变默认加载log页面。
 "pages":[
    "pages/logs/logs",
    "pages/index/index"
  ],
```  

也可以尝试更改界面配置参数  
```
"window":{
  //动态设置下拉背景字体、loading 图的样式,仅支持dark和light
  "backgroundTextStyle":"light",

  //设置导航栏的背景颜色
  "navigationBarBackgroundColor": "#fff",

  //设置导航栏的文字
  "navigationBarTitleText": "WeChat",

  //设置导航栏的字体颜色，仅支持black和write
  "navigationBarTextStyle":"black"
}
```  

**特别注意：JSON配置文件中不能使用注释，否则会报错!**  
### JSON语法  
相比于XML ，JSON格式最大的优点是易于人的阅读和编写，通常不需要特殊的工具，就能读懂和修改，是一种轻量级的数据交换格式。

JSON文件都是被包裹在一个大括号中 {}，通过key-value的方式来表达数据。一般形式为 **键:值**  

JSON 语法是 JavaScript 对象表示语法的子集。
- 数据在名称/值对中
- 数据由逗号分隔
- 大括号保存对象
- 中括号保存数组  

JSON 值可以是：

- 数字（整数或浮点数）
- 字符串（在双引号中）
- 逻辑值（true 或 false）
- 数组（在中括号中）
- 对象（在大括号中）
- null  

### JSON 数字
JSON 数字可以是整型或者浮点型：  
存储年龄为30:
`{ "age":30 }`

### JSON 对象
JSON 对象在大括号（{}）中书写：  
对象可以包含多个名称/值对：  
存储小明这个对象:
`{ "name":"小明" , "age":18,"gender":"男"}`

### JSON 数组
JSON 数组在中括号中书写：  
数组可包含多个**对象**：
存储三个学生的信息：  
```
{
"student": [
{ "name":"小明" , "age":18 },
{ "name":"小王" , "age":20 },
{ "name":"小小李" , "age":19 }
]
}
```  

### JSON 布尔值
JSON 布尔值可以是 true 或者 false：`{ "flag":true }`  

### JSON null
JSON 可以设置 null 值：`address:null`

如果对json语法陌生的，请先学习json语法！
